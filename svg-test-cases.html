<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Test Cases - svag Extension</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .intro {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #007bff;
        }
        .test-case {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-case h3 {
            margin-top: 0;
            color: #007bff;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        .test-case-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
        }
        .preview-area {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 6px;
            border: 2px dashed #ddd;
        }
        button, select, .menu-item {
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        button:hover, .menu-item:hover {
            background: #f0f0f0;
        }
        svg {
            display: inline-block;
        }
        .icon-red { fill: red; }
        .icon-blue { fill: blue; }
        .c4 { fill: #ff6b35; }
        .b20 { stroke: #2c3e50; }
        
        .code-block {
            position: relative;
            background: #282c34;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: #21252b;
            border-bottom: 1px solid #181a1f;
        }
        
        .code-label {
            color: #abb2bf;
            font-size: 12px;
            font-family: 'Monaco', 'Courier New', monospace;
        }
        
        .copy-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 4px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: background 0.2s;
        }
        
        .copy-button:hover {
            background: #0056b3;
        }
        
        .copy-button.copied {
            background: #28a745;
        }
        
        .copy-button svg {
            width: 14px;
            height: 14px;
        }
        
        .code-content {
            padding: 12px;
            overflow-x: auto;
        }
        
        .code-content pre {
            margin: 0;
            color: #abb2bf;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
        }
        
        .warning-box {
            margin-top: 40px;
            padding: 20px;
            background: #fff3cd;
            border-radius: 8px;
            border: 1px solid #ffc107;
        }
        
        .warning-box h3 {
            margin-top: 0;
            color: #856404;
        }
        
        @media (max-width: 1024px) {
            .test-case-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    <!-- Sprite definitions -->
    <svg style="display: none;">
        <defs>
            <symbol id="bookmark-icon" viewBox="0 0 18 18">
                <path d="M4.5 2.25C4.5 1.83579 4.83579 1.5 5.25 1.5H12.75C13.1642 1.5 13.5 1.83579 13.5 2.25V15.75L9 12.75L4.5 15.75V2.25Z"/>
            </symbol>
            
            <symbol id="calendar-icon" viewBox="0 0 18 18">
                <path d="M4.5 2.25V0.75M13.5 2.25V0.75M2.25 5.25H15.75M3.75 2.25H14.25C15.0784 2.25 15.75 2.92157 15.75 3.75V14.25C15.75 15.0784 15.0784 15.75 14.25 15.75H3.75C2.92157 15.75 2.25 15.0784 2.25 14.25V3.75C2.25 2.92157 2.92157 2.25 3.75 2.25Z" stroke-width="1.5" stroke-linecap="round"/>
            </symbol>
            
            <symbol id="download-icon" viewBox="0 0 18 18">
                <path d="M9 2.25V11.25M9 11.25L12.75 7.5M9 11.25L5.25 7.5M3.75 15.75H14.25" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </symbol>
            
            <symbol id="search-icon" viewBox="0 0 18 18">
                <circle cx="8" cy="8" r="5.25" stroke-width="1.5"/>
                <path d="M12 12L15.75 15.75" stroke-width="1.5" stroke-linecap="round"/>
            </symbol>
        </defs>
    </svg>
</head>
<body>
    <h1>SVG Test Cases - svag Extension Testing</h1>
    
    <div class="intro">
        <p>Hover over icons and try CMD+click to download. The extension should correctly extract all SVG notation types.</p>
    </div>
    
    <!-- Test 1: Inline SVG in button -->
    <div class="test-case">
        <h3>Test 1: Inline SVG in button - direct path</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button>
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M9 2.25L11.2451 7.47295L16.8541 8.2918L12.9271 12.1146L13.8607 17.7082L9 15.2275L4.13934 17.7082L5.07285 12.1146L1.14591 8.2918L6.75486 7.47295L9 2.25Z" fill="#FFD700"/>
                    </svg>
                    Star Button
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code1')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code1">&lt;button&gt;
  &lt;svg width="18" height="18" viewBox="0 0 18 18" fill="none"&gt;
    &lt;path d="M9 2.25L11.2451 7.47295L16.8541 8.2918L12.9271 12.1146L13.8607 17.7082L9 15.2275L4.13934 17.7082L5.07285 12.1146L1.14591 8.2918L6.75486 7.47295L9 2.25Z" fill="#FFD700"/&gt;
  &lt;/svg&gt;
  Star Button
&lt;/button&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 2: SVG with <use> in button -->
    <div class="test-case">
        <h3>Test 2: SVG with &lt;use&gt; element in button - sprite reference</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button>
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor">
                        <use href="#bookmark-icon"></use>
                    </svg>
                    Bookmark
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code2')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code2">&lt;button&gt;
  &lt;svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor"&gt;
    &lt;use href="#bookmark-icon"&gt;&lt;/use&gt;
  &lt;/svg&gt;
  Bookmark
&lt;/button&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 3: SVG with CSS class for fill -->
    <div class="test-case">
        <h3>Test 3: SVG with fill from CSS class</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <div class="menu-item">
                    <svg class="icon-red" width="18" height="18" viewBox="0 0 18 18">
                        <path d="M9 1.5C4.85786 1.5 1.5 4.85786 1.5 9C1.5 13.1421 4.85786 16.5 9 16.5C13.1421 16.5 16.5 13.1421 16.5 9C16.5 4.85786 13.1421 1.5 9 1.5Z"/>
                    </svg>
                    Menu Item
                </div>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML + CSS</span>
                    <button class="copy-button" onclick="copyCode(this, 'code3')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code3">&lt;!-- CSS --&gt;
.icon-red { fill: red; }

&lt;!-- HTML --&gt;
&lt;svg class="icon-red" width="18" height="18" viewBox="0 0 18 18"&gt;
  &lt;path d="M9 1.5C4.85786 1.5 1.5 4.85786 1.5 9C1.5 13.1421 4.85786 16.5 9 16.5C13.1421 16.5 16.5 13.1421 16.5 9C16.5 4.85786 13.1421 1.5 9 1.5Z"/&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 4: Path with CSS classes c4 b20 -->
    <div class="test-case">
        <h3>Test 4: Path with CSS classes (c4 b20) - fill and stroke from CSS</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <svg width="18" height="18" viewBox="0 0 18 18">
                    <path class="c4 b20" d="M2.25 9H15.75M9 2.25V15.75" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML + CSS</span>
                    <button class="copy-button" onclick="copyCode(this, 'code4')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code4">&lt;!-- CSS --&gt;
.c4 { fill: #ff6b35; }
.b20 { stroke: #2c3e50; }

&lt;!-- HTML --&gt;
&lt;svg width="18" height="18" viewBox="0 0 18 18"&gt;
  &lt;path class="c4 b20" d="M2.25 9H15.75M9 2.25V15.75" stroke-width="2" stroke-linecap="round"/&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 5: SVG with CSS variable -->
    <div class="test-case">
        <h3>Test 5: SVG with CSS variable (var(--color))</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button style="--color: #4CAF50;">
                    <svg width="18" height="18" viewBox="0 0 18 18" style="fill: var(--color);">
                        <path d="M3.75 9L7.5 12.75L14.25 5.25" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Check
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code5')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code5">&lt;button style="--color: #4CAF50;"&gt;
  &lt;svg width="18" height="18" viewBox="0 0 18 18" style="fill: var(--color);"&gt;
    &lt;path d="M3.75 9L7.5 12.75L14.25 5.25" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/&gt;
  &lt;/svg&gt;
  Check
&lt;/button&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 6: SVG in select -->
    <div class="test-case">
        <h3>Test 6: SVG inside select element</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <select>
                    <option>Option 1</option>
                </select>
                <svg width="18" height="18" viewBox="0 0 18 18" fill="#9333EA" style="margin-left: 10px;">
                    <rect x="3" y="3" width="12" height="12" rx="2"/>
                </svg>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code6')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code6">&lt;svg width="18" height="18" viewBox="0 0 18 18" fill="#9333EA"&gt;
  &lt;rect x="3" y="3" width="12" height="12" rx="2"/&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 7: Nested groups -->
    <div class="test-case">
        <h3>Test 7: Nested SVG groups (&lt;g&gt;)</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button>
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <g fill="#E91E63">
                            <g transform="translate(2, 2)">
                                <circle cx="7" cy="7" r="5"/>
                                <circle cx="7" cy="7" r="2" fill="white"/>
                            </g>
                        </g>
                    </svg>
                    Grouped
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code7')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code7">&lt;svg width="18" height="18" viewBox="0 0 18 18"&gt;
  &lt;g fill="#E91E63"&gt;
    &lt;g transform="translate(2, 2)"&gt;
      &lt;circle cx="7" cy="7" r="5"/&gt;
      &lt;circle cx="7" cy="7" r="2" fill="white"/&gt;
    &lt;/g&gt;
  &lt;/g&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 8: Multiple paths with different fills -->
    <div class="test-case">
        <h3>Test 8: Multiple paths with different fill values</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M12 2L15 9L22 10L17 15L18 22L12 18.5L6 22L7 15L2 10L9 9L12 2Z" fill="#FFD700"/>
                    <circle cx="12" cy="12" r="3" fill="#FF5722"/>
                </svg>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code8')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code8">&lt;svg width="24" height="24" viewBox="0 0 24 24"&gt;
  &lt;path d="M12 2L15 9L22 10L17 15L18 22L12 18.5L6 22L7 15L2 10L9 9L12 2Z" fill="#FFD700"/&gt;
  &lt;circle cx="12" cy="12" r="3" fill="#FF5722"/&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 9: SVG with xlink:href (older syntax) -->
    <div class="test-case">
        <h3>Test 9: SVG with xlink:href (older sprite syntax)</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button>
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="#2196F3">
                        <use xlink:href="#calendar-icon"></use>
                    </svg>
                    Calendar (xlink)
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code9')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code9">&lt;svg width="18" height="18" viewBox="0 0 18 18" fill="#2196F3"&gt;
  &lt;use xlink:href="#calendar-icon"&gt;&lt;/use&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 10: SVG with stroke, not fill -->
    <div class="test-case">
        <h3>Test 10: SVG with stroke only (no fill)</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button>
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="#00BCD4" stroke-width="1.5">
                        <use href="#download-icon"></use>
                    </svg>
                    Download
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code10')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code10">&lt;svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="#00BCD4" stroke-width="1.5"&gt;
  &lt;use href="#download-icon"&gt;&lt;/use&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 11: Combination circle + rect -->
    <div class="test-case">
        <h3>Test 11: Combination of different shape elements (circle, rect)</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="#795548">
                    <rect x="4" y="4" width="7" height="7" rx="1"/>
                    <rect x="13" y="4" width="7" height="7" rx="1"/>
                    <rect x="4" y="13" width="7" height="7" rx="1"/>
                    <circle cx="16.5" cy="16.5" r="3.5"/>
                </svg>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code11')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code11">&lt;svg width="24" height="24" viewBox="0 0 24 24" fill="#795548"&gt;
  &lt;rect x="4" y="4" width="7" height="7" rx="1"/&gt;
  &lt;rect x="13" y="4" width="7" height="7" rx="1"/&gt;
  &lt;rect x="4" y="13" width="7" height="7" rx="1"/&gt;
  &lt;circle cx="16.5" cy="16.5" r="3.5"/&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 12: SVG with ellipse and line -->
    <div class="test-case">
        <h3>Test 12: Ellipse and line elements</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <ellipse cx="12" cy="12" rx="8" ry="5" fill="#9C27B0"/>
                    <line x1="4" y1="12" x2="20" y2="12" stroke="#FFC107" stroke-width="2"/>
                </svg>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code12')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code12">&lt;svg width="24" height="24" viewBox="0 0 24 24"&gt;
  &lt;ellipse cx="12" cy="12" rx="8" ry="5" fill="#9C27B0"/&gt;
  &lt;line x1="4" y1="12" x2="20" y2="12" stroke="#FFC107" stroke-width="2"/&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 13: Polygon and polyline -->
    <div class="test-case">
        <h3>Test 13: Polygon and polyline elements</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <polygon points="12,2 22,22 2,22" fill="#FF9800"/>
                    <polyline points="4,18 12,8 20,18" fill="none" stroke="#F44336" stroke-width="2"/>
                </svg>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code13')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code13">&lt;svg width="24" height="24" viewBox="0 0 24 24"&gt;
  &lt;polygon points="12,2 22,22 2,22" fill="#FF9800"/&gt;
  &lt;polyline points="4,18 12,8 20,18" fill="none" stroke="#F44336" stroke-width="2"/&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 14: Data attribute data-dssvgid -->
    <div class="test-case">
        <h3>Test 14: SVG with data-dssvgid attribute (priority name)</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button>
                    <svg class="icon" data-dssvgid="custom-search-icon" fill="#3F51B5" height="18" viewBox="0 0 18 18" width="18">
                        <use href="#search-icon"></use>
                    </svg>
                    Search
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code14')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code14">&lt;svg class="icon" data-dssvgid="custom-search-icon" fill="#3F51B5" height="18" viewBox="0 0 18 18" width="18"&gt;
  &lt;use href="#search-icon"&gt;&lt;/use&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 15: Complex nested structure -->
    <div class="test-case">
        <h3>Test 15: Complex nested structure with multiple groups</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button>
                    <svg width="24" height="24" viewBox="0 0 24 24">
                        <g fill="#607D8B">
                            <g transform="translate(4, 4)">
                                <path d="M8 0L10 6L16 7L12 11L13 17L8 14L3 17L4 11L0 7L6 6L8 0Z"/>
                            </g>
                        </g>
                    </svg>
                    Nested
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code15')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code15">&lt;svg width="24" height="24" viewBox="0 0 24 24"&gt;
  &lt;g fill="#607D8B"&gt;
    &lt;g transform="translate(4, 4)"&gt;
      &lt;path d="M8 0L10 6L16 7L12 11L13 17L8 14L3 17L4 11L0 7L6 6L8 0Z"/&gt;
    &lt;/g&gt;
  &lt;/g&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 16: SVG without explicit fill (inherit/currentColor) -->
    <div class="test-case">
        <h3>Test 16: SVG without explicit fill (should use computed/currentColor)</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button style="color: #E91E63;">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path d="M9 1.5C4.85786 1.5 1.5 4.85786 1.5 9C1.5 13.1421 4.85786 16.5 9 16.5C13.1421 16.5 16.5 13.1421 16.5 9C16.5 4.85786 13.1421 1.5 9 1.5ZM7.5 12.75L4.5 9.75L5.56066 8.68934L7.5 10.6287L12.4393 5.68934L13.5 6.75L7.5 12.75Z"/>
                    </svg>
                    Inherit Color
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code16')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code16">&lt;button style="color: #E91E63;"&gt;
  &lt;svg width="18" height="18" viewBox="0 0 18 18"&gt;
    &lt;path d="M9 1.5C4.85786 1.5 1.5 4.85786 1.5 9C1.5 13.1421 4.85786 16.5 9 16.5C13.1421 16.5 16.5 13.1421 16.5 9C16.5 4.85786 13.1421 1.5 9 1.5ZM7.5 12.75L4.5 9.75L5.56066 8.68934L7.5 10.6287L12.4393 5.68934L13.5 6.75L7.5 12.75Z"/&gt;
  &lt;/svg&gt;
  Inherit Color
&lt;/button&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 17: SVG with pointer-events -->
    <div class="test-case">
        <h3>Test 17: SVG with pointer-events: none</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button>
                    <svg width="18" height="18" viewBox="0 0 18 18" style="pointer-events: none;" fill="#009688">
                        <path d="M9 2.25C5.27208 2.25 2.25 5.27208 2.25 9C2.25 12.7279 5.27208 15.75 9 15.75C12.7279 15.75 15.75 12.7279 15.75 9C15.75 5.27208 12.7279 2.25 9 2.25ZM12.5303 7.28033L8.53033 11.2803C8.23744 11.5732 7.76256 11.5732 7.46967 11.2803L5.46967 9.28033C5.17678 8.98744 5.17678 8.51256 5.46967 8.21967C5.76256 7.92678 6.23744 7.92678 6.53033 8.21967L8 9.68934L11.4697 6.21967C11.7626 5.92678 12.2374 5.92678 12.5303 6.21967C12.8232 6.51256 12.8232 6.98744 12.5303 7.28033Z"/>
                    </svg>
                    Pointer Events None
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code17')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code17">&lt;svg width="18" height="18" viewBox="0 0 18 18" style="pointer-events: none;" fill="#009688"&gt;
  &lt;path d="M9 2.25C5.27208 2.25 2.25 5.27208 2.25 9C2.25 12.7279 5.27208 15.75 9 15.75C12.7279 15.75 15.75 12.7279 15.75 9C15.75 5.27208 12.7279 2.25 9 2.25ZM12.5303 7.28033L8.53033 11.2803C8.23744 11.5732 7.76256 11.5732 7.46967 11.2803L5.46967 9.28033C5.17678 8.98744 5.17678 8.51256 5.46967 8.21967C5.76256 7.92678 6.23744 7.92678 6.53033 8.21967L8 9.68934L11.4697 6.21967C11.7626 5.92678 12.2374 5.92678 12.5303 6.21967C12.8232 6.51256 12.8232 6.98744 12.5303 7.28033Z"/&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 18: Real example from application -->
    <div class="test-case">
        <h3>Test 18: Real example from application (calendar button simulation)</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <div class="una-field-widget" style="display: inline-block;">
                    <div data-automationid="daterange-field" class="daterange-field">
                        <button class="button-module" data-size="medium" tabindex="0" type="button">
                            <div class="button-text">
                                <svg class="icon-module calendar-icon" data-dssvgid="calendar" fill="rgb(51, 51, 51)" height="18" role="none" viewBox="0 0 18 18" width="18">
                                    <use xlink:href="#calendar-icon"></use>
                                </svg>
                                19.10.2025 – 17.11.2025
                            </div>
                        </button>
                    </div>
                </div>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code18')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code18">&lt;button class="button-module" data-size="medium" type="button"&gt;
  &lt;svg class="icon-module calendar-icon" data-dssvgid="calendar" fill="rgb(51, 51, 51)" height="18" role="none" viewBox="0 0 18 18" width="18"&gt;
    &lt;use xlink:href="#calendar-icon"&gt;&lt;/use&gt;
  &lt;/svg&gt;
  19.10.2025 – 17.11.2025
&lt;/button&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 19: Mix of everything -->
    <div class="test-case">
        <h3>Test 19: Mix - sprite use + CSS class + transform</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button>
                    <svg class="icon-blue" width="20" height="20" viewBox="0 0 18 18" transform="rotate(45)">
                        <use href="#download-icon"></use>
                    </svg>
                    Complex Mix
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code19')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code19">&lt;svg class="icon-blue" width="20" height="20" viewBox="0 0 18 18" transform="rotate(45)"&gt;
  &lt;use href="#download-icon"&gt;&lt;/use&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Test 20: Edge case - path with currentColor -->
    <div class="test-case">
        <h3>Test 20: Edge case - path with currentColor</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button style="color: #673AB7;">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor">
                        <path d="M15.75 8.25H9.75V2.25H8.25V8.25H2.25V9.75H8.25V15.75H9.75V9.75H15.75V8.25Z"/>
                    </svg>
                    Plus currentColor
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code20')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code20">&lt;button style="color: #673AB7;"&gt;
  &lt;svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor"&gt;
    &lt;path d="M15.75 8.25H9.75V2.25H8.25V8.25H2.25V9.75H8.25V15.75H9.75V9.75H15.75V8.25Z"/&gt;
  &lt;/svg&gt;
  Plus currentColor
&lt;/button&gt;</pre>
                </div>
            </div>
        </div>
    </div>
    
    <div class="warning-box">
        <h3>Testing Instructions:</h3>
        <ol>
            <li>Make sure the extension is loaded (reload extension in chrome://extensions/)</li>
            <li>Hover over each icon - a popup with buttons should appear</li>
            <li>Press CMD+click (or click the download button) to download the SVG</li>
            <li>Open the downloaded SVG in an editor or browser</li>
            <li>Verify:
                <ul>
                    <li>✅ No <code>class</code> attributes</li>
                    <li>✅ All elements have <code>fill</code> or <code>stroke</code></li>
                    <li>✅ Correct <code>xmlns</code> and <code>viewBox</code></li>
                    <li>✅ Valid XML without errors</li>
                    <li>✅ Icon displays correctly</li>
                </ul>
            </li>
        </ol>
    </div>
    
    <!-- Test 20: External sprite symbol (Design System simulation) -->
    <div class="test-case">
        <h3>Test 20: External Design System Icon (symbol not in DOM)</h3>
        <div class="test-case-content">
            <div class="preview-area">
                <button class="ds-button">
                    <svg class="icon-module_icon_z3YpC" data-dssvgid="share" fill="var(--color-primary, #2196F3)" height="18" role="none" viewBox="0 0 18 18" width="18">
                        <use xlink:href="#dist__share___297H8"></use>
                    </svg>
                    Share Icon (External Sprite)
                </button>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-label">HTML</span>
                    <button class="copy-button" onclick="copyCode(this, 'code20')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="code-content">
                    <pre id="code20">&lt;svg class="icon-module_icon_z3YpC" data-dssvgid="share" fill="var(--color-primary, #2196F3)" height="18" role="none" viewBox="0 0 18 18" width="18"&gt;
  &lt;use xlink:href="#dist__share___297H8"&gt;&lt;/use&gt;
&lt;/svg&gt;</pre>
                </div>
            </div>
            <div class="test-notes">
                <p><strong>Simulace:</strong> Tento test simuluje ikonu z design systému, kde symbol není v DOM.</p>
                <p><strong>Očekávané chování:</strong> Extension by měl detekovat SVG, extrahovat rendered podobu včetně computed fill barvy, a pojmenovat soubor jako "share.svg" díky data-dssvgid atributu.</p>
                <p><strong>Strategie extrakce:</strong></p>
                <ul>
                    <li>1. Rendered SVG extraction (okamžitá)</li>
                    <li>2. External sprite download (async)</li>
                    <li>3. Computed styles serialization (fallback)</li>
                </ul>
            </div>
        </div>
    </div>

    <style>
        .ds-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-family: system-ui;
        }
        
        .ds-button:hover {
            background: #f5f5f5;
        }
        
        :root {
            --color-primary: #2196F3;
        }
    </style>

    <script>
        function copyCode(button, codeId) {
            const codeElement = document.getElementById(codeId);
            const code = codeElement.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                // Change button text and style
                const originalHTML = button.innerHTML;
                button.classList.add('copied');
                button.innerHTML = `
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    Copied!
                `;
                
                // Reset after 2 seconds
                setTimeout(() => {
                    button.classList.remove('copied');
                    button.innerHTML = originalHTML;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy code:', err);
                alert('Failed to copy code to clipboard');
            });
        }
    </script>
</body>
</html>
